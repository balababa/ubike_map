{"remainingRequest":"/mnt/d/projects/ubike_map/node_modules/babel-loader/lib/index.js!/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js??ref--0-0!/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/projects/ubike_map/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/projects/ubike_map/src/App.vue","mtime":1591268774947},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/babel-loader/lib/index.js","mtime":1585049200444},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js","mtime":1589185829207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEwgZnJvbSAnbGVhZmxldCc7CmltcG9ydCB0YWlwZWlDaXR5IGZyb20gJy4vYXNzZXRzL3RhaXBlaV9jaXR5Lmpzb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdDogewogICAgICAgIGNpdHk6ICfoh7rljJfluIInLAogICAgICAgIGRpc3Q6IHRhaXBlaUNpdHlbMF0uZGlzdHJpY3RzWzBdLm5hbWUKICAgICAgfSwKICAgICAgY2l0aWVzOiB0YWlwZWlDaXR5LAogICAgICByZXRWYWw6IFtdLAogICAgICBPU006IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRpc3RyaWN0czogZnVuY3Rpb24gZGlzdHJpY3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuY2l0aWVzLmZpbmQoZnVuY3Rpb24gKGNpdHkpIHsKICAgICAgICByZXR1cm4gY2l0eS5uYW1lID09PSBfdGhpcy5zZWxlY3QuY2l0eTsKICAgICAgfSkuZGlzdHJpY3RzOwogICAgfSwKICAgIHlvdWJpa2VzOiBmdW5jdGlvbiB5b3ViaWtlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy5yZXRWYWwuZmlsdGVyKGZ1bmN0aW9uIChzdG9wKSB7CiAgICAgICAgcmV0dXJuIHN0b3Auc2FyZWEgPT09IF90aGlzMi5zZWxlY3QuZGlzdDsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgeW91YmlrZXM6IGZ1bmN0aW9uIHlvdWJpa2VzKCkgewogICAgICB0aGlzLnVwZGF0ZU1hcCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlTWFwOiBmdW5jdGlvbiB1cGRhdGVNYXAoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5PU00uZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikgewogICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyKSB7CiAgICAgICAgICBfdGhpczMuT1NNLnJlbW92ZUxheWVyKGxheWVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnlvdWJpa2VzLmZvckVhY2goZnVuY3Rpb24gKGJpa2UpIHsKICAgICAgICBMLm1hcmtlcihbYmlrZS5sYXQsIGJpa2UubG5nXSkuYmluZFBvcHVwKCI8cD48c3Ryb25nIHN0eWxlPVwiZm9udC1zaXplOiAyMHB4O1wiPiIuY29uY2F0KGJpa2Uuc25hLCAiPC9zdHJvbmc+PC9wPlxuICAgICAgICA8c3Ryb25nIHN0eWxlPVwiZm9udC1zaXplOiAxNnB4OyBjb2xvcjogI2Q0NTM0NTtcIj5cdTUzRUZcdTc5REZcdTUwMUZcdThFQ0FcdThGMUJcdTUyNjlcdTk5MThcdUZGMUEiKS5jb25jYXQoYmlrZS5zYmksICIgXHU1M0YwPC9zdHJvbmc+PGJyPlxuICAgICAgICBcdTUzRUZcdTUwNUNcdTdBN0FcdTRGNERcdTUyNjlcdTk5MTg6ICIpLmNvbmNhdChiaWtlLmJlbXAsICI8YnI+XG4gICAgICAgIDxzbWFsbD5cdTY3MDBcdTVGOENcdTY2RjRcdTY1QjBcdTY2NDJcdTk1OTM6ICIpLmNvbmNhdChiaWtlLm1kYXksICI8L3NtYWxsPiIpKS5hZGRUbyhfdGhpczMuT1NNKTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2l0aWVzWzBdLmRpc3RyaWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChkaXN0KSB7CiAgICAgICAgaWYgKGRpc3QubmFtZSA9PT0gX3RoaXMzLnNlbGVjdC5kaXN0KSB7CiAgICAgICAgICBfdGhpczMuT1NNLnBhblRvKEwubGF0TG5nKGRpc3QubGF0aXR1ZGUsIGRpc3QubG9uZ2l0dWRlKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB2YXIgYXBpID0gJ2h0dHBzOi8vdGNnYnVzZnMuYmxvYi5jb3JlLndpbmRvd3MubmV0L2Jsb2J5b3ViaWtlL1lvdUJpa2VUUC5qc29uJzsKICAgIHRoaXMuJGh0dHAuZ2V0KGFwaSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXM0LnJldFZhbCA9IE9iamVjdC52YWx1ZXMocmVzcG9uc2UuZGF0YS5yZXRWYWwpOwogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5PU00gPSBMLm1hcCgnbWFwJywgewogICAgICBjZW50ZXI6IFsyNS4wNDQyMTQsIDEyMS41MjQ3MjVdLAogICAgICB6b29tOiAxOAogICAgfSk7CiAgICBMLnRpbGVMYXllcignaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLCB7CiAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9Imh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnLyI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCA8YSBocmVmPSJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi4wLyI+Q0MtQlktU0E8L2E+LCBJbWFnZXJ5IMKpIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lm1hcGJveC5jb20vIj5NYXBib3g8L2E+JywKICAgICAgbWF4Wm9vbTogMTgKICAgIH0pLmFkZFRvKHRoaXMuT1NNKTsKICB9Cn07"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAA,CAAA,MAAA,SAAA;AACA,OAAA,UAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,IAAA,EAAA,UAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAA,CAAA,EAAA;AAFA,OADA;AAKA,MAAA,MAAA,EAAA,UALA;AAMA,MAAA,MAAA,EAAA,EANA;AAOA,MAAA,GAAA,EAAA;AAPA,KAAA;AAAA,GAFA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,KAAA,KAAA,CAAA,MAAA,CAAA,IAAA;AAAA,OAAA,EAAA,SAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,KAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA;AAAA,OAAA,CAAA;AACA;AANA,GAXA;AAmBA,EAAA,KAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,SAAA;AACA;AAHA,GAnBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,WAAA,GAAA,CAAA,SAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,YAAA,CAAA,CAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,CAAA,WAAA,CAAA,KAAA;AACA;AACA,OAJA;AAMA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,CAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,GAAA,CAAA,EACA,SADA,iDACA,IAAA,CAAA,GADA,uIAEA,IAAA,CAAA,GAFA,iFAGA,IAAA,CAAA,IAHA,wEAIA,IAAA,CAAA,IAJA,eAKA,KALA,CAKA,MAAA,CAAA,GALA;AAMA,OAPA;AASA,WAAA,MAAA,CAAA,CAAA,EAAA,SAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA;AACA,OAJA;AAKA;AAtBA,GAxBA;AAgDA,EAAA,OAhDA,qBAgDA;AAAA;;AACA,QAAA,GAAA,GAAA,mEAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,KAFA;AAGA,GArDA;AAsDA,EAAA,OAtDA,qBAsDA;AACA,SAAA,GAAA,GAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA;AACA,MAAA,MAAA,EAAA,CAAA,SAAA,EAAA,UAAA,CADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA,CAAA;AAKA,IAAA,CAAA,CAAA,SAAA,CAAA,oDAAA,EAAA;AACA,MAAA,WAAA,EAAA,yNADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA,EAGA,KAHA,CAGA,KAAA,GAHA;AAIA;AAhEA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <!-- 選擇地區 -->\n      <div class=\"toolbox col-sm-3 p-2 bg-white\">\n        <div class=\"form-group d-flex\">\n          <label for=\"city\" class=\"col-form-label mr-2 text-right\">縣市</label>\n          <div class=\"flex-fill\">\n            <select id=\"city\" class=\"form-control\" v-model=\"select.city\">\n              <!-- 製作下拉選單 -->\n              <option v-for=\"city in cities\" :key=\"city.name\" :value =\"city.name\">\n                {{ city.name }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"form-group d-flex\">\n          <label for=\"dist\" class=\"col-form-label mr-2 text-right\">地區</label>\n          <div class=\"flex-fill\">\n            <select id=\"dist\" class=\"form-control\" v-model=\"select.dist\">\n              <option v-for=\"district in districts\" :key=\"district.name\" :value=\"district.name\">\n                {{ district.name }}\n              </option>\n              <!-- 製作下拉選單 -->\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <!-- 顯示地圖和 UBike 站點 -->\n      <div class=\"col-sm-9\">\n        <div id=\"map\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport taipeiCity from './assets/taipei_city.json';\n\nexport default {\n  name: 'App',\n  data: () => ({\n    select: {\n      city: '臺北市',\n      dist: taipeiCity[0].districts[0].name,\n    },\n    cities: taipeiCity,\n    retVal: [],\n    OSM: {},\n  }),\n  computed: {\n    districts() {\n      return this.cities.find((city) => city.name === this.select.city).districts;\n    },\n    youbikes() {\n      return this.retVal.filter((stop) => stop.sarea === this.select.dist);\n    },\n  },\n  watch: {\n    youbikes() {\n      this.updateMap();\n    },\n  },\n  methods: {\n    updateMap() {\n      this.OSM.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          this.OSM.removeLayer(layer);\n        }\n      });\n\n      this.youbikes.forEach((bike) => {\n        L.marker([bike.lat, bike.lng])\n          .bindPopup(`<p><strong style=\"font-size: 20px;\">${bike.sna}</strong></p>\n        <strong style=\"font-size: 16px; color: #d45345;\">可租借車輛剩餘：${bike.sbi} 台</strong><br>\n        可停空位剩餘: ${bike.bemp}<br>\n        <small>最後更新時間: ${bike.mday}</small>`)\n          .addTo(this.OSM);\n      });\n\n      this.cities[0].districts.forEach((dist) => {\n        if (dist.name === this.select.dist) {\n          this.OSM.panTo(L.latLng(dist.latitude, dist.longitude));\n        }\n      });\n    },\n  },\n  created() {\n    const api = 'https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json';\n    this.$http.get(api).then((response) => {\n      this.retVal = Object.values(response.data.retVal);\n    });\n  },\n  mounted() {\n    this.OSM = L.map('map', {\n      center: [25.044214, 121.524725],\n      zoom: 18,\n    });\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n      maxZoom: 18,\n    }).addTo(this.OSM);\n  },\n};\n\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n  position: relative;\n  background-color: coral;\n}\n</style>\n"],"sourceRoot":"src"}]}