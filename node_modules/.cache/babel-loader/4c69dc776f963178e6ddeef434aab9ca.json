{"remainingRequest":"/mnt/d/projects/ubike_map/node_modules/babel-loader/lib/index.js!/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js??ref--0-0!/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/projects/ubike_map/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/projects/ubike_map/src/App.vue","mtime":1591267364904},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/babel-loader/lib/index.js","mtime":1585049200444},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js","mtime":1589185829207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEwgZnJvbSAnbGVhZmxldCc7CmltcG9ydCB0YWlwZWlDaXR5IGZyb20gJy4vYXNzZXRzL3RhaXBlaV9jaXR5Lmpzb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdDogewogICAgICAgIGNpdHk6ICfoh7rljJfluIInLAogICAgICAgIGRpc3Q6IHRhaXBlaUNpdHlbMF0uZGlzdHJpY3RzWzBdLm5hbWUKICAgICAgfSwKICAgICAgY2l0aWVzOiB0YWlwZWlDaXR5LAogICAgICByZXRWYWw6IFtdLAogICAgICBPU006IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRpc3RyaWN0czogZnVuY3Rpb24gZGlzdHJpY3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuY2l0aWVzLmZpbmQoZnVuY3Rpb24gKGNpdHkpIHsKICAgICAgICByZXR1cm4gY2l0eS5uYW1lID09PSBfdGhpcy5zZWxlY3QuY2l0eTsKICAgICAgfSkuZGlzdHJpY3RzOwogICAgfSwKICAgIHlvdWJpa2VzOiBmdW5jdGlvbiB5b3ViaWtlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy5yZXRWYWwuZmlsdGVyKGZ1bmN0aW9uIChzdG9wKSB7CiAgICAgICAgcmV0dXJuIHN0b3Auc2FyZWEgPT09IF90aGlzMi5zZWxlY3QuZGlzdDsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgeW91YmlrZXM6IGZ1bmN0aW9uIHlvdWJpa2VzKCkgewogICAgICB0aGlzLnVwZGF0ZU1hcCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlTWFwOiBmdW5jdGlvbiB1cGRhdGVNYXAoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5PU00uZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikgewogICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyKSB7CiAgICAgICAgICBfdGhpczMuT1NNLnJlbW92ZUxheWVyKGxheWVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnlvdWJpa2VzLmZvckVhY2goZnVuY3Rpb24gKHlvdWJpa2UpIHsKICAgICAgICBMLm1hcmtlcihbeW91YmlrZS5sYXQsIHlvdWJpa2UubG5nXSkuYWRkVG8oX3RoaXMzLk9TTSk7CiAgICAgIH0pOwogICAgICB2YXIgc2VsZWN0ZWREaXN0ID0gdGhpcy5jaXRpZXNbMF0uZGlzdHJpY3RzLmZpbmQoZnVuY3Rpb24gKGRpc3QpIHsKICAgICAgICByZXR1cm4gZGlzdC5uYW1lID09PSBfdGhpczMuc2VsZWN0LmRpc3Q7CiAgICAgIH0pOwogICAgICB0aGlzLk9TTS5wYW5UbyhzZWxlY3RlZERpc3QubGF0aXR1ZGUsIHNlbGVjdGVkRGlzdC5sb25naXR1ZGUpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgIHZhciBhcGkgPSAnaHR0cHM6Ly90Y2didXNmcy5ibG9iLmNvcmUud2luZG93cy5uZXQvYmxvYnlvdWJpa2UvWW91QmlrZVRQLmpzb24nOwogICAgdGhpcy4kaHR0cC5nZXQoYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpczQucmV0VmFsID0gT2JqZWN0LnZhbHVlcyhyZXNwb25zZS5kYXRhLnJldFZhbCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLk9TTSA9IEwubWFwKCdtYXAnLCB7CiAgICAgIGNlbnRlcjogWzI1LjA0NDIxNCwgMTIxLjUyNDcyNV0sCiAgICAgIHpvb206IDE4CiAgICB9KTsKICAgIEwudGlsZUxheWVyKCdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsIHsKICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj0iaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsIDxhIGhyZWY9Imh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvIj5DQy1CWS1TQTwvYT4sIEltYWdlcnkgwqkgPGEgaHJlZj0iaHR0cHM6Ly93d3cubWFwYm94LmNvbS8iPk1hcGJveDwvYT4nLAogICAgICBtYXhab29tOiAxOAogICAgfSkuYWRkVG8odGhpcy5PU00pOwogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAA,CAAA,MAAA,SAAA;AACA,OAAA,UAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,IAAA,EAAA,UAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAA,CAAA,EAAA;AAFA,OADA;AAKA,MAAA,MAAA,EAAA,UALA;AAMA,MAAA,MAAA,EAAA,EANA;AAOA,MAAA,GAAA,EAAA;AAPA,KAAA;AAAA,GAFA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,KAAA,KAAA,CAAA,MAAA,CAAA,IAAA;AAAA,OAAA,EAAA,SAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,KAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA;AAAA,OAAA,CAAA;AACA;AANA,GAXA;AAmBA,EAAA,KAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,SAAA;AACA;AAHA,GAnBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,WAAA,GAAA,CAAA,SAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,YAAA,CAAA,CAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,CAAA,WAAA,CAAA,KAAA;AACA;AACA,OAJA;AAMA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,QAAA,CAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,GAAA,EAAA,OAAA,CAAA,GAAA,CAAA,EAAA,KAAA,CAAA,MAAA,CAAA,GAAA;AACA,OAFA;AAIA,UAAA,YAAA,GAAA,KAAA,MAAA,CAAA,CAAA,EAAA,SAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA;AAAA,OAAA,CAAA;AACA,WAAA,GAAA,CAAA,KAAA,CAAA,YAAA,CAAA,QAAA,EAAA,YAAA,CAAA,SAAA;AACA;AAdA,GAxBA;AAwCA,EAAA,OAxCA,qBAwCA;AAAA;;AACA,QAAA,GAAA,GAAA,mEAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,KAFA;AAGA,GA7CA;AA8CA,EAAA,OA9CA,qBA8CA;AACA,SAAA,GAAA,GAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA;AACA,MAAA,MAAA,EAAA,CAAA,SAAA,EAAA,UAAA,CADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA,CAAA;AAKA,IAAA,CAAA,CAAA,SAAA,CAAA,oDAAA,EAAA;AACA,MAAA,WAAA,EAAA,yNADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA,EAGA,KAHA,CAGA,KAAA,GAHA;AAIA;AAxDA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <!-- 選擇地區 -->\n      <div class=\"toolbox col-sm-3 p-2 bg-white\">\n        <div class=\"form-group d-flex\">\n          <label for=\"city\" class=\"col-form-label mr-2 text-right\">縣市</label>\n          <div class=\"flex-fill\">\n            <select id=\"city\" class=\"form-control\" v-model=\"select.city\">\n              <!-- 製作下拉選單 -->\n              <option v-for=\"city in cities\" :key=\"city.name\" :value =\"city.name\">\n                {{ city.name }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"form-group d-flex\">\n          <label for=\"dist\" class=\"col-form-label mr-2 text-right\">地區</label>\n          <div class=\"flex-fill\">\n            <select id=\"dist\" class=\"form-control\" v-model=\"select.dist\">\n              <option v-for=\"district in districts\" :key=\"district.name\" :value=\"district.name\">\n                {{ district.name }}\n              </option>\n              <!-- 製作下拉選單 -->\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <!-- 顯示地圖和 UBike 站點 -->\n      <div class=\"col-sm-9\">\n        <div id=\"map\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport taipeiCity from './assets/taipei_city.json';\n\nexport default {\n  name: 'App',\n  data: () => ({\n    select: {\n      city: '臺北市',\n      dist: taipeiCity[0].districts[0].name,\n    },\n    cities: taipeiCity,\n    retVal: [],\n    OSM: {},\n  }),\n  computed: {\n    districts() {\n      return this.cities.find((city) => city.name === this.select.city).districts;\n    },\n    youbikes() {\n      return this.retVal.filter((stop) => stop.sarea === this.select.dist);\n    },\n  },\n  watch: {\n    youbikes() {\n      this.updateMap();\n    },\n  },\n  methods: {\n    updateMap() {\n      this.OSM.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          this.OSM.removeLayer(layer);\n        }\n      });\n\n      this.youbikes.forEach((youbike) => {\n        L.marker([youbike.lat, youbike.lng]).addTo(this.OSM);\n      });\n\n      const selectedDist = this.cities[0].districts.find((dist) => dist.name === this.select.dist);\n      this.OSM.panTo(selectedDist.latitude, selectedDist.longitude);\n    },\n  },\n  created() {\n    const api = 'https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json';\n    this.$http.get(api).then((response) => {\n      this.retVal = Object.values(response.data.retVal);\n    });\n  },\n  mounted() {\n    this.OSM = L.map('map', {\n      center: [25.044214, 121.524725],\n      zoom: 18,\n    });\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n      maxZoom: 18,\n    }).addTo(this.OSM);\n  },\n};\n\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n  position: relative;\n  background-color: coral;\n}\n</style>\n"],"sourceRoot":"src"}]}