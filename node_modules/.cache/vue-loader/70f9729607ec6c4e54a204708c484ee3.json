{"remainingRequest":"/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/d/projects/ubike_map/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/d/projects/ubike_map/src/App.vue","mtime":1591267364904},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/babel-loader/lib/index.js","mtime":1585049200444},{"path":"/mnt/d/projects/ubike_map/node_modules/cache-loader/dist/cjs.js","mtime":1591120007855},{"path":"/mnt/d/projects/ubike_map/node_modules/vue-loader/lib/index.js","mtime":1589185829207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgdGFpcGVpQ2l0eSBmcm9tICcuL2Fzc2V0cy90YWlwZWlfY2l0eS5qc29uJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBkYXRhOiAoKSA9PiAoewogICAgc2VsZWN0OiB7CiAgICAgIGNpdHk6ICfoh7rljJfluIInLAogICAgICBkaXN0OiB0YWlwZWlDaXR5WzBdLmRpc3RyaWN0c1swXS5uYW1lLAogICAgfSwKICAgIGNpdGllczogdGFpcGVpQ2l0eSwKICAgIHJldFZhbDogW10sCiAgICBPU006IHt9LAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICBkaXN0cmljdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNpdGllcy5maW5kKChjaXR5KSA9PiBjaXR5Lm5hbWUgPT09IHRoaXMuc2VsZWN0LmNpdHkpLmRpc3RyaWN0czsKICAgIH0sCiAgICB5b3ViaWtlcygpIHsKICAgICAgcmV0dXJuIHRoaXMucmV0VmFsLmZpbHRlcigoc3RvcCkgPT4gc3RvcC5zYXJlYSA9PT0gdGhpcy5zZWxlY3QuZGlzdCk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHlvdWJpa2VzKCkgewogICAgICB0aGlzLnVwZGF0ZU1hcCgpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZU1hcCgpIHsKICAgICAgdGhpcy5PU00uZWFjaExheWVyKChsYXllcikgPT4gewogICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyKSB7CiAgICAgICAgICB0aGlzLk9TTS5yZW1vdmVMYXllcihsYXllcik7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMueW91YmlrZXMuZm9yRWFjaCgoeW91YmlrZSkgPT4gewogICAgICAgIEwubWFya2VyKFt5b3ViaWtlLmxhdCwgeW91YmlrZS5sbmddKS5hZGRUbyh0aGlzLk9TTSk7CiAgICAgIH0pOwoKICAgICAgY29uc3Qgc2VsZWN0ZWREaXN0ID0gdGhpcy5jaXRpZXNbMF0uZGlzdHJpY3RzLmZpbmQoKGRpc3QpID0+IGRpc3QubmFtZSA9PT0gdGhpcy5zZWxlY3QuZGlzdCk7CiAgICAgIHRoaXMuT1NNLnBhblRvKHNlbGVjdGVkRGlzdC5sYXRpdHVkZSwgc2VsZWN0ZWREaXN0LmxvbmdpdHVkZSk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGFwaSA9ICdodHRwczovL3RjZ2J1c2ZzLmJsb2IuY29yZS53aW5kb3dzLm5ldC9ibG9ieW91YmlrZS9Zb3VCaWtlVFAuanNvbic7CiAgICB0aGlzLiRodHRwLmdldChhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgIHRoaXMucmV0VmFsID0gT2JqZWN0LnZhbHVlcyhyZXNwb25zZS5kYXRhLnJldFZhbCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLk9TTSA9IEwubWFwKCdtYXAnLCB7CiAgICAgIGNlbnRlcjogWzI1LjA0NDIxNCwgMTIxLjUyNDcyNV0sCiAgICAgIHpvb206IDE4LAogICAgfSk7CgogICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywgewogICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy8iPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj0iaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC8iPkNDLUJZLVNBPC9hPiwgSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicsCiAgICAgIG1heFpvb206IDE4LAogICAgfSkuYWRkVG8odGhpcy5PU00pOwogIH0sCn07Cgo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <!-- 選擇地區 -->\n      <div class=\"toolbox col-sm-3 p-2 bg-white\">\n        <div class=\"form-group d-flex\">\n          <label for=\"city\" class=\"col-form-label mr-2 text-right\">縣市</label>\n          <div class=\"flex-fill\">\n            <select id=\"city\" class=\"form-control\" v-model=\"select.city\">\n              <!-- 製作下拉選單 -->\n              <option v-for=\"city in cities\" :key=\"city.name\" :value =\"city.name\">\n                {{ city.name }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"form-group d-flex\">\n          <label for=\"dist\" class=\"col-form-label mr-2 text-right\">地區</label>\n          <div class=\"flex-fill\">\n            <select id=\"dist\" class=\"form-control\" v-model=\"select.dist\">\n              <option v-for=\"district in districts\" :key=\"district.name\" :value=\"district.name\">\n                {{ district.name }}\n              </option>\n              <!-- 製作下拉選單 -->\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <!-- 顯示地圖和 UBike 站點 -->\n      <div class=\"col-sm-9\">\n        <div id=\"map\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport taipeiCity from './assets/taipei_city.json';\n\nexport default {\n  name: 'App',\n  data: () => ({\n    select: {\n      city: '臺北市',\n      dist: taipeiCity[0].districts[0].name,\n    },\n    cities: taipeiCity,\n    retVal: [],\n    OSM: {},\n  }),\n  computed: {\n    districts() {\n      return this.cities.find((city) => city.name === this.select.city).districts;\n    },\n    youbikes() {\n      return this.retVal.filter((stop) => stop.sarea === this.select.dist);\n    },\n  },\n  watch: {\n    youbikes() {\n      this.updateMap();\n    },\n  },\n  methods: {\n    updateMap() {\n      this.OSM.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          this.OSM.removeLayer(layer);\n        }\n      });\n\n      this.youbikes.forEach((youbike) => {\n        L.marker([youbike.lat, youbike.lng]).addTo(this.OSM);\n      });\n\n      const selectedDist = this.cities[0].districts.find((dist) => dist.name === this.select.dist);\n      this.OSM.panTo(selectedDist.latitude, selectedDist.longitude);\n    },\n  },\n  created() {\n    const api = 'https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json';\n    this.$http.get(api).then((response) => {\n      this.retVal = Object.values(response.data.retVal);\n    });\n  },\n  mounted() {\n    this.OSM = L.map('map', {\n      center: [25.044214, 121.524725],\n      zoom: 18,\n    });\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n      maxZoom: 18,\n    }).addTo(this.OSM);\n  },\n};\n\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n  position: relative;\n  background-color: coral;\n}\n</style>\n"]}]}